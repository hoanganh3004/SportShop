<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Chi tiết sản phẩm</title>
    <style>
        .detail-images {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 8px;
        }

        .detail-images img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .detail-images img:hover {
            transform: scale(1.05);
        }

        .info-label {
            font-weight: 600;
            color: #566a7f;
            width: 120px;
            display: inline-block;
        }
    </style>
</head>

<body>
    <div class="modal-header">
        <h5 class="modal-title">Chi tiết sản phẩm</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <!-- Thông báo nếu có -->
        <div th:if="${error}" class="alert alert-danger">
            <span th:text="${error}"></span>
        </div>

        <div th:if="${product != null}">
            <!-- Ảnh cover / slider -->
            <div class="mb-4">
                <h6 class="fw-bold mb-2">Ảnh sản phẩm:</h6>
                <div th:if="${product.images != null and !product.images.isEmpty()}" class="detail-images">
                    <img th:each="img : ${product.images}" th:src="@{'/images/' + ${img.fileName}}" alt="Ảnh sản phẩm"
                        onclick="window.open(this.src, '_blank')">
                </div>
                <div th:if="${product.images == null or product.images.isEmpty()}" class="text-muted fst-italic">
                    Chưa có ảnh nào.
                </div>
            </div>

            <div class="row mb-2">
                <div class="col-md-6">
                    <p><span class="info-label">Tên SP:</span> <span th:text="${product.name}"
                            class="fw-bold text-primary"></span></p>
                </div>
                <div class="col-md-6">
                    <p><span class="info-label">Mã SP:</span> <span th:text="${product.masp}"
                            class="badge bg-secondary"></span></p>
                </div>
            </div>

            <div class="row mb-2">
                <div class="col-md-6">
                    <p><span class="info-label">Giá:</span> <span
                            th:text="${product.price != null ? #numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT') + '₫' : '0₫'}"
                            class="fw-bold text-success"></span></p>
                </div>
                <div class="col-md-6">
                    <p><span class="info-label">Số lượng:</span> <span th:text="${product.quantity}"></span></p>
                </div>
            </div>

            <div class="row mb-2">
                <div class="col-md-6">
                    <p><span class="info-label">Danh mục:</span> <span
                            th:text="${product.category != null ? product.category.name : 'Chưa phân loại'}"></span></p>
                </div>
                <div class="col-md-6">
                    <p><span class="info-label">Size/Color:</span> <span
                            th:text="${(product.size ?: '') + ' / ' + (product.color ?: '')}"></span></p>
                </div>
            </div>

            <div class="mb-3">
                <span class="info-label d-block mb-1">Mô tả:</span>
                <div class="p-3 bg-light rounded text-muted" th:text="${product.description ?: 'Không có mô tả'}"></div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary btn-switch-edit" th:data-id="${product.id}"
            th:if="${product != null}">
            <i class="bx bx-edit"></i> Chỉnh sửa
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
    </div>
</body>

</html>