



<h1 class="h3 mb-4 text-gray-800">ðŸ“¦ Quáº£n lÃ½ danh má»¥c sáº£n pháº©m</h1>

<!-- thá»“ng bÃ¡o -->
<c:if test="${not empty param.error || not empty param.success}">
  <div class="alert alert-dismissible fade show
              ${not empty param.error ? 'alert-danger' : 'alert-success'}"
       role="alert">
    <strong>${not empty param.error ? 'Lá»—i:' : 'ThÃ nh cÃ´ng:'}</strong>
      ${not empty param.error ? param.error : param.success}
    <button type="button" class="close" data-dismiss="alert" aria-label="ÄÃ³ng">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
</c:if>

<!-- TÃ¬m kiáº¿m -->
<form action="admin-category" method="get" class="form-inline mb-3">
  <input type="text" name="keyword" class="form-control rounded-pill mr-2 shadow-sm" placeholder="TÃ¬m danh má»¥c..." value="${param.keyword}">
  <button type="submit" class="btn btn-primary rounded-pill px-4"><i class="fas fa-search"></i> TÃ¬m</button>
  <button type="button" class="btn btn-success ml-2 rounded-pill px-4" onclick="loadAddCategoryForm()">
    <i class="fas fa-plus"></i> ThÃªm danh má»¥c
  </button>
</form>

<!-- Danh sÃ¡ch danh má»¥c -->
<div class="table-responsive">
  <table class="table table-bordered">
    <thead class="thead-light">
    <tr>
      <th>STT</th>
      <th>TÃªn danh má»¥c</th>
      <th>MÃ´ táº£</th>
      <th>HÃ nh Ä‘á»™ng</th>
    </tr>
    </thead>
    <tbody>
    <c:set var="startIndex" value="${(currentPage - 1) * pageSize}" />
    <c:forEach var="c" items="${categoryList}" varStatus="loop">
      <tr>
        <td>${startIndex + loop.index + 1}</td>
        <td>${c.cname}</td>
        <td>${c.description}</td>
        <td>
          <button type="button" class="btn btn-sm btn-warning mb-1" onclick="loadEditCategoryForm(${c.cid})">
            <i class="fas fa-edit"></i> Sá»­a
          </button>
          <a href="delete-category?id=${c.cid}" class="btn btn-sm btn-danger mb-1"
             onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a?')">
            <i class="fas fa-trash"></i> XÃ³a
          </a>
        </td>
      </tr>
    </c:forEach>
    </tbody>
  </table>
</div>

<!-- Modal ThÃªm -->
<div class="modal fade" id="addCategoryModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered modal-md" role="document">
    <div class="modal-content" id="addCategoryContent"></div>
  </div>
</div>

<!-- Modal Sá»­a -->
<div class="modal fade" id="editCategoryModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered modal-md" role="document">
    <div class="modal-content" id="editCategoryContent"></div>
  </div>
</div>

<!-- Scripts -->
<script src="${pageContext.request.contextPath}/vendor/jquery/jquery.min.js"></script>
<script src="${pageContext.request.contextPath}/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<script>
  function loadAddCategoryForm() {
    $.get("add-category", function (data) {
      $('#addCategoryContent').html(data);
      $('#addCategoryModal').modal('show');
    });
  }

  function loadEditCategoryForm(id) {
    $.get("edit-category?id=" + id, function (data) {
      $('#editCategoryContent').html(data);
      $('#editCategoryModal').modal('show');
    });
  }
</script>
